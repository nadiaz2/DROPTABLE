<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>

<body style="background-color:darkgray;">
<script>
    window.onload = async function (e) {
        e.preventDefault();
        let webSocket = new WebSocket('wss://' + window.location.host)

        //receiving
        webSocket.onmessage = (event) => {
            let pc_message = JSON.parse(event.data)
            console.log(pc_message);
        };

        await until(() => webSocket.readyState === WebSocket.OPEN)

        const obj = {name: "PhoneFaceDown", message: 1};
        webSocket.send(JSON.stringify(obj));

        await new Promise(r => setTimeout(r, 3000));

        window.addEventListener("deviceorientation", handleOrientation);
    }

    function handleOrientation(event){
        if (!(event.beta > 150 || event.beta < -150)){
            window.location.href = 'game1.html';
        }
    }

    function until(conditionFunction) {

        const poll = resolve => {
            if (conditionFunction()) resolve();
            else setTimeout(_ => poll(resolve), 100);
        }

        return new Promise(poll);

    }
</script>
<style>
    .content {
        position: fixed;
        top: 50%;
        left: 50%;
        margin-top: -200px;
        margin-left: -250px;
        max-width: 50%;
        max-height: 50%;

        font-size: 50px;
        font-style: italic;
        text-align: center;
    }
</style>
<p class="content">The Game is Paused.<br> <br>Please Flip Back Your Phone or Continue on PC</p>


</body>
</html>